<ion-header *ngIf = 'user'>
    <ion-toolbar color = 'primary'>
        <ion-buttons slot = 'start'>
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>{{user.uName}}</ion-title>
        <ion-buttons slot = 'end'>
            <ion-button (click) = 'ds.logOut()' color = 'danger'
                        fill = 'solid'
                        shape = 'round'>
                <ion-icon name = 'log-out'></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<app-menu-comp [uId] = 'user?.uId'></app-menu-comp>

<ion-content *ngIf = 'user' class = 'ion-text-center ion-padding'>


    <h3 *ngIf = 'currentP?.length > 0'>Current Projects</h3>
    <ion-card *ngFor = 'let project of currentP'
              class = 'ion-text-left'>
        <ion-card-header>
            <ion-item lines = 'full'>
                <ion-card-title class = 'ion-text-center'>
                    {{project.pName}}
                </ion-card-title>
                <ion-icon
                        [color] = 'project.pStatus === "Active" ?
                            "warning": "success"'
                        [name] = "project.pStatus === 'Active' ?
                              'folder-open' : 'folder'"
                        [routerLink] = '["/"+user.uId,project.pId]'
                        slot = 'end'>

                </ion-icon>
            </ion-item>
            <ion-card-subtitle>Start Date:
                <b>{{project.pStartDate | date}}</b></ion-card-subtitle>
            <ion-card-subtitle>Deadline:
                <b>{{project.pDeadline | date }}</b></ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>

            {{project.pDesc}}
            <br>Active Members:
            <b>{{project.pMemberIds.length}}</b>
            <br>
            <b [style] = 'moneyEarned(project) >= 0 ?
            "color: green" : "color: red"'> Money Earned:
                                            $ {{moneyEarned(project)}}</b>
        </ion-card-content>
    </ion-card>
    <br>

    <h3 *ngIf = 'pastP?.length > 0'>Past Projects</h3>
    <ion-card *ngFor = 'let project of pastP' class = 'ion-text-left'>
        <ion-card-header>
            <ion-item lines = 'full'>
                <ion-card-title class = 'ion-text-center'>
                    {{project.pName}}
                </ion-card-title>
                <ion-icon
                        [color] = 'project.pStatus === "Active" ?
                            "warning": "success"'
                        [name] = "project.pStatus === 'Active' ?
                              'folder-open' : 'folder'"
                        [routerLink] =
                                '["/"+user.uId,project.pId]'
                        slot = 'end'>
                </ion-icon>
            </ion-item>
            <ion-card-subtitle>Start Date:
                <b>{{project.pStartDate | date}}</b></ion-card-subtitle>
            <ion-card-subtitle>Deadline:
                <b>{{project.pDeadline | date}}</b></ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
            <p>
                {{project.pDesc}}
            <p>
            <p>Number of Members: <b>{{project.pMemberIds.length}}</b>
            </p>
        </ion-card-content>
    </ion-card>

    <ion-fab horizontal = 'end' slot = 'fixed' vertical = 'bottom'>
        <ion-fab-button [@push] color = 'primary'>
            <ion-icon name = 'albums'></ion-icon>
        </ion-fab-button>
        <ion-fab-list side = 'top'>
            <ion-fab-button (click) = 'addNewClient()' color = 'secondary'>
                <ion-icon name = 'person-add'></ion-icon>
            </ion-fab-button>
            <ion-fab-button (click) = 'addNewProject()' color = 'warning'>
                <ion-icon name = 'duplicate'></ion-icon>
            </ion-fab-button>
        </ion-fab-list>
    </ion-fab>
</ion-content>
